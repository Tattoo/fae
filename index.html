<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>FAE - Characters</title>
        <style>
            :root {
                --left-column:      122px;
                --middle-section:   271px;
                --aspect-spacing:   43px;
                --approach-spacing: 36px;
                --stress-spacing:   84px;
                --bottom-section:   917px;
            }
            ::placeholder {
                color: #aeb0b2;
            }
            body {
                background: url("fae.png") no-repeat;
                min-height: 1100px;
            }
            #switcher {
                position: absolute;
                top: 0px;
                left: 0px;
            }
            input[type=text], textarea {
                font-family: 'Arial Black', Gadget, sans-serif;
                border: 0px;
                pointer-events: none;
                position: absolute;
            }
            #name {
                left: var(--left-column);
                top: 97px;
                width: 386px;
                font-size: 17px;

            }
            #description {
                left: var(--left-column);
                top: 135px;
                width: 384px;
                height: 82px;
            }
            #refresh {
                left: 521px;
                top: 147px;
                width: 98px;
                font-size: 51px;
            }
            .aspect {
                left: var(--left-column);
                width: 344px;
            }
            .approach {
                left: 611px;
                width: 115px;
                font-size: 15px;
            }
            #stunts {
                left: var(--left-column);
                top: 524px;
                width: 602px;
                height: 340px;
            }
            .stress {
                top: var(--bottom-section);
                width: 71px;
                font-size: 46px;
            }
            .consequence {
                left: 403px;
                width: 325px;
                font-size: 22px;
            }
        </style>

    </head>
    <body>
        <select id="switcher">
            <option value="a">Atte</option>
            <option value="e">Eero</option>
            <option value="j">Johannes</option>
        </select>

        <input type="text" id="name" />
        <textarea id="description"></textarea>
        <input type="text" id="refresh" />

        <textarea class="aspect" style="top: calc(var(--middle-section) + var(--aspect-spacing) * 0)"></textarea>
        <textarea class="aspect" style="top: calc(var(--middle-section) + var(--aspect-spacing) * 1)"></textarea>
        <textarea class="aspect" style="top: calc(var(--middle-section) + var(--aspect-spacing) * 2)"></textarea>
        <textarea class="aspect" style="top: calc(var(--middle-section) + var(--aspect-spacing) * 3)"></textarea>
        <textarea class="aspect" style="top: calc(var(--middle-section) + var(--aspect-spacing) * 4)"></textarea>

        <input type="text" class="approach" style="top: calc(var(--middle-section) + var(--approach-spacing) * 0)" />
        <input type="text" class="approach" style="top: calc(var(--middle-section) + var(--approach-spacing) * 1)" />
        <input type="text" class="approach" style="top: calc(var(--middle-section) + var(--approach-spacing) * 2)" />
        <input type="text" class="approach" style="top: calc(var(--middle-section) + var(--approach-spacing) * 3)" />
        <input type="text" class="approach" style="top: calc(var(--middle-section) + var(--approach-spacing) * 4)" />
        <input type="text" class="approach" style="top: calc(var(--middle-section) + var(--approach-spacing) * 5)" />

        <textarea id="stunts"></textarea>

        <input type="text" class="stress" style="left: calc(var(--left-column) + var(--stress-spacing) * 0)" />
        <input type="text" class="stress" style="left: calc(var(--left-column) + var(--stress-spacing) * 1)" />
        <input type="text" class="stress" style="left: calc(var(--left-column) + var(--stress-spacing) * 2)" />

        <input type="text" class="consequence" style="top: calc(var(--bottom-section) + var(--aspect-spacing) * 0)" />
        <input type="text" class="consequence" style="top: calc(var(--bottom-section) + var(--aspect-spacing) * 1)" />
        <input type="text" class="consequence" style="top: calc(var(--bottom-section) + var(--aspect-spacing) * 2)" />
    </body>
    <script>
        function loadCharacter(){
            var data = {
                "a": {
                      "name": "Julius Mallas"
                    , "description": ""
                    , "refresh": "3"
                    , "aspect": ["Geeninuorennettu, eläköityny johdon konsultti", "Pitkällä uralla on pitkät jäljet", "Rhodium-tason asiakkuus Arkadia Varallisuudessa", "", ""]
                    , "approach": ["+3", "+1", "+1", "+2", "+2", "0"]
                    , "stunts": "Koska olen ymmärtänyt verkostoitumisen arvon,\nvoin kerran pelikerran aikana löytää hyödyllisen vanhan tutun\n\n(Koska refleksejäni on keinohermostollisesti paranneltu,\nvoin kerran pelisekerran aikana toimia taistelussa ensimmäisenä)"
                    , "stress": ["", "", ""]
                    , "consequence": ["", "", ""]
                }
                , "e": {
                      "name": "Anfion Saradatos"
                    , "description": ""
                    , "refresh": "3"
                    , "aspect": ["Altruistinen telepaatti-pilotti", "Bourasin turvallisuuspalvelun etsintäkuuluttama", "Rahtialus Voleta", "", ""]
                    , "approach": ["+2", "+1", "+1", "0", "+2", "+3"]
                    , "stunts": "Koska alukseni on varustettu häivetekniikalla,\nSaan +2 kun ovelasti puolustan\nlentäessäni alustani"
                    , "stress": ["", "", ""]
                    , "consequence": ["", "", ""]
                }
                , "j": {
                      "name": "Loxias Loukas"
                    , "description": "https://tattoo.github.io/fae/fae.pdf\nhttps://tattoo.github.io/fae/fate.pdf"
                    , "refresh": "3"
                    , "aspect": ["Kirkasotsainen tutkiva journalisti", "Työntää nokkansa vääriin paikkoihin", "Herättää välitöntä luottamusta", "", ""]
                    , "approach": ["+1", "+3", "+1", "0", "+2", "+2"]
                    , "stunts": "Koska olen taitava puhuja\nSaan +2 kun ovelasti ylitän haasteen\nyrittäessäni saada itselleni pääsyä paikkoihin, johon minulla ei olisi oikeutta"
                    , "stress": ["", "", ""]
                    , "consequence": ["", "", ""]
                }
            }
            , character = data[document.querySelector("#switcher").value];
            if (character === undefined){
                alert("Could not load character")
            }

            Object.entries(character).forEach(function( [field, value] ){
                if (typeof value === "string"){
                    document.querySelector( "#" + field ).value = value;
                    return;
                }
                document.querySelectorAll( "." + field ).forEach(function( el, i ){
                    el.value = value[i];
                });
            });
        }

        function setPlacholder( el ){
            if( !el.id ){
                return;
            }
            placholderText = el.id[0].toUpperCase() + el.id.slice(1);
            el.placeholder = placholderText;
        }

        window.onload = function(){
            document.querySelector("#switcher").onchange = loadCharacter
            loadCharacter();

            document.querySelectorAll( "input" ).forEach( setPlacholder );
            document.querySelectorAll( "textarea" ).forEach( setPlacholder );
        }

    </script>
</html>